> IP地址是以网络号和主机号来标示网络上的主机的，我们把网络号相同的主机称之为本地网络，网络号不相同的主机称之为远程网络主机，本地网络中的主机可以直接相互通信；远程网络中的主机要相互通信必须通过本地网关（Gateway）来传递转发数据。

## 作用

1. 子网掩码（Subnet [Mask](https://so.csdn.net/so/search?q=Mask&spm=1001.2101.3001.7020)）又叫网络掩码、地址掩码，必须结合IP地址一起对应使用。
2. 只有通过子网掩码，才能表明一台主机所在的子网与其他子网的关系，使网络正常工作。
3. 子网掩码和IP地址做“与”运算，分离出IP地址中的网络地址和主机地址，用于判断该IP地址是在本地网络上，还是在远程网络网上。
4. 子网掩码还用于将网络进一步划分为若干子网，以避免主机过多而拥堵或过少而IP浪费。

## 组成

1. 同IP地址一样，子网掩码是由长度为32位二进制数组成的一个地址。
2. 子网掩码32位与IP地址32位相对应，IP地址如果某位是网络地址，则子网掩码为1，否则为0。
3. 举个栗子：如：11111111.11111111.11111111.00000000（左边连续的1的个数代表网络号的长度，（使用时必须是连续的，理论上也可以不连续），右边连续的0的个数代表主机号的长度。）

## 表示方式

**①、点分十进制表示法**
二进制转换十进制，每8位用点号隔开
例如：子网掩码二进制11111111.11111111.11111111.00000000，表示为255.255.255.0

**②、CIDR斜线记法**
IP地址/n
例1：192.168.1.100/24，其子网掩码表示为255.255.255.0，二进制表示为11111111.11111111.11111111.00000000
例2：172.16.198.12/20，其子网掩码表示为255.255.240.0，二进制表示为11111111.11111111.11110000.00000000
不难发现，例1中共有24个１，例2中共有20个１，所以n是这么来的。运营商ISP常用这样的方法给客户分配IP地址。

**注：n为1到32的数字，表示子网掩码中网络号的长度，通过n的个数确定子网的主机数=2^(32-n)-2（-2的原因：主机位全为0时表示本网络的网络地址，主机位全为1时表示本网络的广播地址，这是两个特殊地址）。**

## 为什么要使用子网掩码

子网掩码可以分离出IP地址中的网络地址和主机地址，那为什么要分离呢？因为两台主机要通信，首先要判断是否处于同一网段，即网络地址是否相同。如果相同，那么可以把数据包直接发送到目标主机，否则就需要路由网关将数据包转发送到目的地。**它是用来划分IP地址中哪一部分是网络号，哪一部分是机器号**

> IP地址：192.168.1.129
>
> 二进制：
>
> 1100 0000.1010 1000.0000 0001.1000 0001
>
> 子网掩码：255.255.255.0
>
> 二进制：
>
> 1111 1111.1111 1111.1111 1111.0000 0000
>
> 计算：
>
> ```text
> 1100 0000.1010 1000.0000 0001.1000 0001
> 1111 1111.1111 1111.1111 1111.0000 0000
> ————————————————————
> 1100 0000.1010 1000.0000 0001.0000 0000
> ```
>
> 计算后的这段二进制代码相比于原来的IP地址，后面8位被用0遮掩了。
>
> 为什么要遮掩？因为我们不必关心后面8位是1还是0了。子网网段已经被划分出来了。
>
> 1100 0000.1010 1000.0000 0001.0000 0000的十进制：192.168.1.0
>
> 也就是说，从192.168.1.0到192.168.1.255都是同一个子网网段，里面的0—255号可以分配给不同的机器。
>
> 0—255号都是机器的号码，IP地址显示的就是其中129号。
>
> 192.168.1.0就是所谓的**网络号**，也可以写作192.168.1或者192.168.1.0\24（24指的是IP地址中有24位未被遮掩）
>
> IP地址的意思就很明白了，网段（网络号）加上机器号码。同一个IP地址根据不同子网掩码，会划分出不同的网络号和机器号。
>
> ---
>
> 但是，现在就出现了个问题，我子网掩码的最后8位全是0，要是最后8位不全为0怎么办？又是什么意思呢？
>
> 现在我们就要看上面子网掩码为255.255.255.0的时候机器号码是从0到255的，那如果我想在0到255里再划分一部分呢？
>
> 给出**新IP地址**：192.168.1.188 再给出**新的子网掩码**：255.255.255.224
>
> 现在IP的网络号就不是192.168.1.0了，不再是网段192.168.1.0到192.168.1.255了
>
> ```text
> 1100 0000.1010 1000.0000 0001.1011 1100  
> 1111 1111.1111 1111.1111 1111.1110 0000  
> ————————————————————
> 1100 0000.1010 1000.0000 0001.1010 0000
> ```
>
> 不再是24位未被遮掩了，而是27位未被遮掩。被遮掩的后5位，我们不必再关心它是1还是0了。
>
> 这就意味着：后5位不论怎么变换，都是在同一个网段里。
>
> 后5位的变化是在
>
> 1100 0000.1010 1000.0000 0001.101**0 0000**
>
> 到
>
> 1100 0000.1010 1000.0000 0001.101**1 1111**
>
> 之间的。
>
> 它的十进制：192.168.1.160到192.168.1.191是由**新的子网掩码**划分出来的子网网段。
>
> 我们称192.168.1.160\27是它的网络号，它的机器号是在160到191之间任意分配出去。之前的IP地址：192.168.1.188属于其中。
>
> 总结：子网掩码就是用来遮掩IP地址并划分网段的工具，根据**遮掩的位数不同**来划分不同的网段。

## 分类

**①、缺省子网掩码**

也叫默认子网掩码，即未划分子网，对应的网络号的位都置 1 ，主机号都置 0 。

未做子网划分的IP地址：网络号＋主机号

A类网络缺省子网掩码： 255.0.0.0，用CIDR表示为/8

B类网络缺省子网掩码： 255.255.0.0，用CIDR表示为/16

C类网络缺省子网掩码： 255.255.255.0，用CIDR表示为/24

**②、自定义子网掩码**

将一个网络划分子网后，把原本的主机号位置的一部分给了子网号，余下的才是给了子网的主机号。其形式如下：

做子网划分后的IP地址：网络号＋子网号＋子网主机号

举个栗子：

如：192.168.1.100/25，其子网掩码表示：255.255.255.128

意思就是将192.168.1.0这个网段的主机位的最高1位划分为了子网。

## 参考文章

1. [如何理解子网掩码？ - 纪言的回答 - 知乎](https://www.zhihu.com/question/56895036/answer/447915532) 
2. [子网掩码详解](https://blog.csdn.net/bbj12345678/article/details/105972092)