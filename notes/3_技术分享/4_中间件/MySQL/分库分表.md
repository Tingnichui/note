### 分库分表

#### 水平拆分

##### 分布式事务解决方案

1. cap
2. base最终一致
3. 具体框架——tcc seata saga
4. 理论基础——二阶/三阶段提交

##### 分片规则如何设计

1. 尽量离散
2. 尽量避免分布式事务
3. 业务逻辑——不同业务分片规则冲突？

##### 数据如何迁移

1. 停机迁移——跑批工具、数据校验、业务低峰
2. 平滑迁移
   1. 数据完整性校验——切读流量动态校验、灰度切流、监控告警
   2. 兼容性发布——先双写在增量

#### 垂直拆分

1. 为什么反范式设计？——结合业务场景&性能
2. 拆分思路
   1. 字段访问频率
   2. 业务模型

#### 冷热分离

1. 为什么冷数据归档——避免大表影响性能
2. 分离规则
   1. 定时任务滚动归档
   2. 业务实时归档